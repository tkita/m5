<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <script type="text/jscript" src="./lib/jquery-3.1.1.min.js"></script>
        <link rel="stylesheet" href="./lib/materialize.min.css">
        <script type="text/javascript" src="./lib/materialize.min.js"></script>

        <script type="text/javascript" charset="utf-8"
                src="https://map.yahooapis.jp/js/V1/jsapi?appid=dj00aiZpPTVucG5sTDNqOE1sdiZzPWNvbnN1bWVyc2VjcmV0Jng9MGM-">
        </script>

        <style>
         body {
             padding-bottom: 4em;
         }

         .container {
             margin: 1em;
             max-width: 100%;
             width: 97%;
         }

         .navbar-fixed {
             position: fixed;
             bottom: 0;
         }

         #kyoku {
             display: block;
             height: 100%;
         }

	 option:nth-child(odd) {
	     background: #e0f2f1;
	 }

         #hot {
             height: 45em;
             overflow-y: scroll;
         }

         td {
             padding: 0.5em;
         }

         table.highlight tbody tr:hover {
             background-color: MistyRose;
         }

         #map_yougu {
             height: 42em;
         }

         #map_jrsubway {
             height: 42em;
         }

         #map_bus {
             height: 42em;
         }

         #busStops, #busRoutes {
             display: block;
             height: 9em;
         }

         a {
             transition: background-color 0.3s;
         }

         a:hover {
             background-color: #ddd;
         }

         #ebDep, #ebArr {
             display: block;
             height: 16em;
         }

         .station {
             border: 1px solid black;
             padding: 0 0.2em 0 0.2em;
         }

        </style>

    </head>

    <body onLoad="init();">
        <div class="navbar-fixed">
            <nav>
                <div class="nav-wrapper">
                    <ul class="side-nav">
                        <li><a href="#top" id="nav_top">目的地 (A)</a></li>
                        <li><a href="#departure" id="nav_dep">出発地点 (D)</a></li>
                        <li><a href="#yougu" id="nav_yougu">徒歩・自動車 (R)</a></li>
                        <li><a href="#jrsubway" id="nav_jr">ＪＲ線・地下鉄 (S)</a></li>
                        <li><a href="#bus" id="nav_bus">バス (B)</a></li>
                        <li><a href="#ekibus" id="nav_eki">えきバス (E)</a></li>
                        <li><a href="#links" id="nav_link">リンク (L)</a></li>
                    </ul>
                </div>
            </nav>
        </div>

        <div class="container">

            <article class="card z-depth-2" id="top">
                <div class="card-content">
                    <span class="card-title">目的地</span>
                    <div class="row">
                        <fieldset>
                            <legend>選択済み</legend>
                            名称 = <span id="name"></span>｜
                            建物 = <span id="build"></span>｜
                            lat = <span id="build_lat"></span>｜
                            lng = <span id="build_lng"></span>
                        </fieldset>
                    </div>

                    <div class="row">
                        <div class="col s2">
                            <select id="kyoku" size="29" onChange="changeKyoku(this.value);"></select>
                        </div>

                        <div class="col s10" id="hot">
                            <table class="highlight">
                                <thead>
                                    <tr>
                                        <th>名称</th>
                                        <th>建物</th>
                                        <th>住所</th>
                                        <th>lat</th>
                                        <th>lng</th>
                                        <th>通勤不便</th>
                                        <th>電話番号</th>
                                    </tr>
                                </thead>
                                <tbody id="data">
                                </tbody>
                            </table>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col s2">
                            <p class="btn" onClick="alert('yet.');">すべての施設を表示</p>
                        </div>
                        <div class="col s3">
                            <p class="btn" onClick="move();">選んだ施設の位置情報を出発地点へセット</p>
                        </div>
                    </div>
                </div> <!-- card-content -->
            </article>

            <article class="card z-depth-2" id="departure">
                <div class="card-content">
                    <span class="card-title">出発地点</span>
                    <fieldset>
                        <legend>漢字住所</legend>
                        <p class="btn" onClick="pasteAddr();">クリップボードから貼り付け</p>
                        <input id="dep_addr" type="text" size="40"
                               placeholder="漢字住所を入力">
                    </fieldset>

                    <div class="row">
                        <div class="col s8">
                            <fieldset>
                                <legend>Geocode 変換</legend>
                                <p id="btnGeocode" class="btn" onClick="doGeocode('dep_');">実行（漢字住所を緯度・経度へ変換）</p>
                                <ul>
                                    <li>formatted_address = <span id="dep_name"></span></li>
                                    <li>lat = <span id="dep_lat"></span></li>
                                    <li>lon = <span id="dep_lon"></span></li>
                                </ul>
                            </fieldset>
                        </div>

                        <div class="col s4">
                            <fieldset>
                                <legend>マップに表示する条丁目境界線</legend>
                                <div class="input-field col s12">
		                    <select id="boundCity" onChange="changeCity(this.value);"></select>
                                </div>
                                <div class="input-field col s12">
		                    <select id="boundAddr"></select>
                                </div>
                            </fieldset>
                        </div>
                    </div>
                </div>
            </article>

            <article class="card z-depth-2" id="yougu">
                <div class="card-content">
                    <span class="card-title">徒歩・自動車</span>
                    <div class="row">
                        <div class="col s2">
                            <fieldset>
                                <legend>方法</legend>
                                <label>
                                    <input type="radio" class="with-gap" name="type" value="walk" />
                                    <span>徒歩</span>
                                </label><br>
                                <label>
                                    <input id="car" type="radio" class="with-gap" name="type" value="car" checked="checked" />
                                    <span>自動車</span>
                                </label>
                            </fieldset>
                        </div>

                        <div class="col s6">
                            <fieldset>
                                <legend>ルート検索</legend>
                                <p class="btn col" onClick="getRoute();">ルート検索</p>
                                <ul class="col" style="margin: 0px;">
                                    <li>総距離: <span id="dist"></span> メートル</</li>
                                    <li>総時間: <span id="time"></span> 分</li>
                                </ul>
                            </fieldset>
                        </div>
                    </div>
                    <div id="map_yougu"></div>
                </div>
            </article>

            <article class="card z-depth-2" id="jrsubway">
                <div class="card-content">
                    <span class="card-title">ＪＲ線・地下鉄</span>
                    <p class="btn" onClick="dispNearStation();">近隣の駅を表示する</p>
                    <div id="map_jrsubway"></div>
                </div>
            </article>

            <article class="card z-depth-2" id="bus">
                <div class="card-content">
                    <span class="card-title">バス</span>
                    <div class="row">
                        <div class="col s2">
                            <fieldset>
                                <legend>近隣のバス停を検索</legend>
			        <label>
			            <input name="busAround" type="radio" class="with-gap" checked />
                                    <span>目的地の近隣</span>
			        </label><br>
			        <label>
			            <input name="busAround" type="radio" class="with-gap" />
                                    <span>出発地点の近隣</span>
			        </label><br>
			        <p class="btn" onClick="searchNearBusStop();">検索を実行</p>
                            </fieldset>
                        </div>

                        <div class="col s2">
                            <fieldset>
                                <legend>名称でバス停を検索</legend>
			        <input type="text" id="busstopname" placeholder="バス停の名称（漢字）"
			               onFocus="this.select();"
			               class="ime-active"><br>
                                <p class="btn" onClick="searchNameBusStop();">検索を実行</p>
                            </fieldset>
                        </div>

                        <div class="col s3">
                            <fieldset style="height: 12em;">
                                <legend>バス停検索の結果</legend>
                                <select id="busStops" size="4" onChange="changeBusStop(this.value);"></select>
                            </fieldset>
                        </div>

                        <div class="col s5">
                            <fieldset style="height: 12em;">
                                <legend>選択したバス停を含むバス路線</legend>
                                <select id="busRoutes" size="4" onClick="dispBusRoute(this.value);"></select>
                            </fieldset>
                        </div>
                    </div> <!-- row -->
                    <div id="map_bus"></div>
                </div>
            </article>

            <article class="card z-depth-2" id="ekibus">
                <div class="card-content">
                    <span class="card-title">えきバス</span>
                    <div class="row">
                        <div class="col s4">
                            <fieldset style="margin-bottom: 1em; border-color: rgba( 48, 97, 198, 1 );;">
                                <legend>出発</legend>
			        <input type="text"
				       id="word_ebDep"
				       placeholder="名称（ローマ字可）"
				       onFocus="this.select();"
				       onKeyUp="ebChangeWord('ebDep');" >
                                <select id="ebDep" size="15"></select>
                            </fieldset>

                            <fieldset style="margin-bottom: 1em; border-color: rgba( 200, 48, 48, 1 );">
                                <legend>到着</legend>
			        <input type="text"
				       id="word_ebArr"
				       placeholder="名称（ローマ字可）"
				       onFocus="this.select();"
				       onKeyUp="ebChangeWord('ebArr');" >
                                <select id="ebArr" size="15"></select>
                            </fieldset>
                            <p class="btn" onClick="getSearchResult()">検索を実行</p>
                        </div>
                        <div class="col s8">
                            <table>
                                <thead>
                                    <tr>
                                        <th>片道金額</th><th>所要時間</th><th>経路</th>
                                    </tr>
                                </thead>
                                <tbody id="ebTbody">
                                </tbody>
                            </table>
                        </div>
                    </div> <!-- row -->
                </div> <!-- card-content -->
            </article>

            <article class="card z-depth-2" id="links">
                <div class="card-content">
                    <span class="card-title">リンク</span>
                    <dl>
	                <dt>ＪＲ北海道バス</dt>
	                <dd><a href="http://www.jhbunchin.com/" target="_blank" class="highlight">片道・定期券運賃、距離照会</a></dd>
	                <dt>北海道中央バス</dt>
	                <dd><a href="http://www.chuo-bus.co.jp/city_route/rate_table/" target="_blank">片道・定期運賃・キロ数検索</a></dd>
	                <dd><a href="http://www.bustei.com/" target="_blank">時刻表</a></dd>
	                <dt>じょうてつバス</dt>
	                <dd><a href="http://www.jotetsu.co.jp/bus/pdf/price_list.pdf" target="_blank">バス料金表</a></dd>
	                <dt>えにわコミュニティバス</dt>
	                <dd><a href="https://www.city.eniwa.hokkaido.jp/kurashi/kurashi_tetsuzuki/kotsu/eniwacommunitybus/index.html" target="_blank">えにわコミュニティバス</a></dd>
                    </dl>
                </div>
            </article>
        </div>

        <script type="text/jscript" src="./data/objbound.js"></script>
        <script type="text/jscript" src="./data/objboundline.js"></script>
        <script type="text/jscript" src="./data/objbusstoproute.js"></script>
        <script type="text/jscript" src="./data/objbusstops.js"></script>
        <script type="text/jscript" src="./data/objstations.js"></script>
        <script type="text/javascript" src="./data/objwp.js"></script>
        <script type="text/javascript" src="./resources/y.js"></script>

	<script>
	 $(function () {
	     // #で始まるアンカーをクリックした場合に処理
	     $( 'a[href^="#"]' ).click( function () {
		 var speed = 400; // スクロールの速度。ミリ秒
		 var href= $( this ).attr( 'href' );
		 var target = $( href == '#' || href == '' ? 'html' : href );
		 var position = target.offset().top;
		 $( 'body,html' ).animate( { scrollTop: position },
					   speed, 'swing' );
		 return false;
	     });
	 });
	</script>

    </body>
</html>
