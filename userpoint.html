<!DOCTYPE html>
<html>
    <head>
	<meta charset="UTF-8">
	<!-- <meta http-equiv="X-UA-Compatible" content="IE=11" /> -->
	<meta name="viewport"
	      content="width=device-width, initial-scale=1.0, minimum-scale=1.0" />
	<title>m5</title>
	<script>
	 var opener = window.dialogArguments;

         function makeMap( canvas, lat, lng, option ) {
             [ [ 'center' , new google.maps.LatLng( lat, lng ) ],
               [ 'panControl' , false ],
               [ 'scaleControl' , true ],
               [ 'zoomControlOptions' , { style: google.maps.ZoomControlStyle.SMALL } ],
               [ 'mapTypeId' , google.maps.MapTypeId.ROADMAP ]
             ].forEach( function( e ) {
	         option[ e[0] ] = e[1];
             });
             return new google.maps.Map( document.getElementById( canvas ), option );
         }

         function init () {
             console.info( 'enter init()' );
             var map = makeMap( 'userPoint_map', '43.061945', '141.354395', { zoom: 15 } );
             console.info( map );
             google.maps.event.clearListeners( map, 'rightclick' );
             map.addListener( 'rightclick', function( arg ) {
                 opener.document.getElementById( 'userPoint' ).textContent =
                     opener.format( '$$$,$$$ ', arg.latLng.lat, arg.latLng.lng );
             });
         }

        </script>

        <style>
         #userPoint_map {
             width: 800px;
             height: 800px;
         }
        </style>
    </head>

    <body>
        <div id="userPoint_map"></div>
	<script type="text/jscript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC78j0reQqOofNHQxsINRTt21UgyVK1MTo&libraries=geometry&callback=init"></script>
    </body>
</html>
